<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="author" content="">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="assets/theme.css" rel="stylesheet">
        <link href="assets/style.css" rel="stylesheet">
    </head>

    <body style="margin: 0;">

        <div style="height: 100vh;">
            <div style="height:20vh;text-align: center;">
                <button type="button" id="btn_add">Add Row</button>
                <button type="button" id="btn_update">Update Row</button>
                <button type="button" id="btn_delete">Delete Row</button>
            </div>
            
            <div style="height:80vh">
                <div id="div_table"></div>
            </div>

        </div>
        <script type="module">
            import PickleTable from './assets/script.js';
            //set headers
            const headers = [
                {
                    title:'Id',
                    key:'id',
                    width:'10%'
                },
                {
                    title:'Title',
                    key:'title',
                    width:'100px',
                    columnFormatter:(elm,rowData,columnData)=>{
                        //this method will manuplate column content
                        //console.log(elm,rowData);

                        return columnData+'_formattedd..';
                    },
                    columnClick:(elm,rowData)=>{
                        //this method will manuplate column content
                        //console.log(elm,rowData);
                        console.log('column clicked..',elm);
                    },
                }
            ]

            /**
             * local data example
             */
            let data = [];
            for(let i=0;i<35;i++){
                data.push({
                    id:i+1,
                    title:'title'+i,
                });
            }



            const table = new PickleTable({
                container:'#div_table',
                headers:headers,
                pageLimit:10,
                //row formatting callback
                rowFormatter:(elm,data)=>{
                    console.log(elm,data);
                    //modify row element
                    //elm.style.backgroundColor = 'yellow';
                    //modify data
                    data.rowAdded = 'i im added from row';
                    return data;
                },
                //row click callback
                rowClick:(elm,data)=>{
                    console.log(elm,data);
                },
                afterRender:(currentData,currentPage)=>{

                },
                data:data
            });


            /**
             * ajax data example 
             * 
             */
            /*const table = new PickleTable({
                container:'#div_table',
                headers:headers,
                type:'ajax',
                //row formatting callback
                rowFormatter:(elm,data)=>{
                    console.log(elm,data);
                    //modify row element
                    //elm.style.backgroundColor = 'yellow';
                    //modify data
                    data.rowAdded = 'i im added from row';
                    return data;
                },
                //row click callback
                rowClick:(elm,data)=>{
                    console.log(elm,data);
                },
                ajax:{
                    url:'src/responder.php',
                    pageLimit:20, // put '-1' for getting all data
                    data:{
                        //filter:{},
                        //order:{},
                    }
                },
            });*/


            /**
             * example methods
             */
            /*setTimeout(() => {
               

                //clean table data
                table.clearData();

                //add data to table
                //to-do

                //get data from table
                //to-do


                //update table data
                //to-do
                
            }, 1000);*/
            

            //test events
            //test add row
            document.getElementById('btn_add').addEventListener('click',()=>{
                table.addRow({
                    id:(new Date).getTime(),
                    title:'title falan boyle',
                });
            });


            //test update row
            document.getElementById('btn_update').addEventListener('click',()=>{
                table.updateRow(1,{
                    title:'i m updated title => '+(new Date).getTime(),
                });
            });

             //test delete row
             document.getElementById('btn_delete').addEventListener('click',()=>{
                table.deleteRow(2);
            });
        </script>
        
    </body>

</html>